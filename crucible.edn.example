;; Crucible Configuration Example
;; Copy this file to crucible.edn or ~/.config/crucible/config.edn and customize

{;; Jira configuration (required for work-on command)
 :jira {:base-url "https://mycompany.atlassian.net"
        :username "user@company.com"
        ;; Use pass: prefix to fetch from password manager
        ;; Or use plain text token (not recommended)
        :api-token "pass:work/atlassian/jira-token"
        ;; Quick story defaults
        :default-project "PROJ"           ; Default project key for quick stories
        :default-issue-type "Task"        ; Default issue type: "Task", "Story", "Bug", etc.
        :default-story-points 1           ; Default story points
        :auto-assign-self true            ; Auto-assign new stories to yourself
        :auto-add-to-sprint true}         ; Auto-add new stories to current sprint
 
 ;; AI Enhancement (optional - improves ticket content quality)
 :ai {:enabled false                     ; Set to true to enable AI enhancement
      :gateway-url "https://your-ai-gateway.com/api/enhance"
      :api-key "pass:work/ai-gateway-key" ; or plain text (not recommended)
      :timeout-ms 5000                    ; Request timeout in milliseconds
      :prompt "Enhance this Jira ticket for clarity and professionalism. Fix spelling and grammar. Keep the same general meaning but improve readability."}

 ;; Workspace configuration
 ;; All paths support ~ for home directory expansion
 :workspace {:root-dir "workspace"      ; or absolute path like "~/work/crucible-workspace"
             :logs-dir "logs"           ; relative to root-dir
             :tickets-dir "tickets"     ; relative to root-dir
             :docs-dir "docs"}          ; relative to root-dir
 
 ;; Editor fallback (used if $EDITOR environment variable not set)
 :editor "vim"
 
}

;; Environment Variable Overrides
;; The following environment variables can override config file values:
;; - CRUCIBLE_JIRA_URL → :jira :base-url
;; - CRUCIBLE_JIRA_USER → :jira :username
;; - CRUCIBLE_JIRA_TOKEN → :jira :api-token
;; - CRUCIBLE_AI_GATEWAY_URL → :ai :gateway-url
;; - CRUCIBLE_AI_API_KEY → :ai :api-key
;; - CRUCIBLE_WORKSPACE_DIR → :workspace :root-dir
;; - EDITOR → :editor

;; Password Manager Integration
;; Any string value can use the "pass:" prefix to fetch from the pass password manager
;; Examples:
;;   :api-token "pass:work/jira-token"
;;   :api-token "pass:company/atlassian/api-key"
;; The value after "pass:" is passed to: pass show <value>

;; Configuration Loading Order (later overrides earlier):
;; 1. Built-in defaults
;; 2. ~/.config/crucible/config.edn (user global config)
;; 3. ./crucible.edn (project-specific config)
;; 4. Environment variables
;; 5. Password manager resolution (for pass: prefixed values)